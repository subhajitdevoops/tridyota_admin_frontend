import{r as j,S as E,j as e,w as i,y as s}from"./index-bf82c2d2.js";import{a3 as w,T as k,l as U,D as R,d as F,e as I,M as P,E as L,u as O,P as H,g as V,h as q,i as z}from"./Layout-175bf00a.js";import{a as G,C as M,S as J,B as K}from"./BulkActionDrawer-e925344e.js";import{u as Q,n as v,b as A,L as T,E as D}from"./index.esm-47afe3d2.js";import{I as B}from"./InputArea-3fddad50.js";import{u as W}from"./useFilter-ec5bd7bd.js";import{T as X}from"./TableLoading-800c8975.js";import{N as Y}from"./NotFound-90d3264e.js";import"./iconBase-d3779ff1.js";import"./dayjs.min-61f3a08c.js";import"./xlsx-04f2268f.js";const Z=t=>{const[n,c]=j.useState(!0),[h,r]=j.useState(!1),{isDrawerOpen:x,closeDrawer:d,setIsUpdate:g}=j.useContext(E),{handleSubmit:l,register:p,setValue:u,clearErrors:b,formState:{errors:N}}=Q(),y=async({symbol:f,name:o})=>{var a,C;try{r(!0);const m={name:o,symbol:f,status:n?"show":"hide"};if(t){const S=await w.updateCurrency(t,m);g(!0),r(!1),A(S.message),d()}else{const S=await w.addCurrency(m);g(!0),r(!1),A(S.message),d()}}catch(m){r(!1),v(m?(C=(a=m==null?void 0:m.response)==null?void 0:a.data)==null?void 0:C.message:m.message),d()}};return j.useEffect(()=>{if(!x){u("name"),u("symbol"),c(!0),b("symbol"),b("name");return}t&&(async()=>{var f,o;try{const a=await w.getCurrencyById(t);a&&(u("name",a.name),u("symbol",a.symbol),c(a.status==="show"))}catch(a){v(a?(o=(f=a==null?void 0:a.response)==null?void 0:f.data)==null?void 0:o.message:a.message)}})()},[b,t,x,u]),{errors:N,onSubmit:y,register:p,status:n,setStatus:c,isSubmitting:h,handleSubmit:l}},_=({id:t})=>{const{errors:n,onSubmit:c,register:h,status:r,setStatus:x,isSubmitting:d,handleSubmit:g}=Z(t);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:t?e.jsx(k,{title:i("UpdateCurrency"),description:i("UpdateCurrencyText")}):e.jsx(k,{title:i("AddCurrency"),description:i("AddCurrencyText")})}),e.jsx(U.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:g(c),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(T,{label:i("CurrenciesName")}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(B,{register:h,label:"Name",name:"name",type:"text",placeholder:"Name"}),e.jsx(D,{errorName:n.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(T,{label:i("CurrenciesSymbol")}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(B,{register:h,label:"Symbol",name:"symbol",type:"text",placeholder:"Symbol"}),e.jsx(D,{errorName:n.symbol})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(T,{label:i("CurrenciesEnabled")}),e.jsx("div",{className:"col-span-8 sm:col-span-1 text-align-left",children:e.jsx(G,{processOption:r,handleProcess:x})})]})]}),e.jsx(R,{id:t,title:"Currency",isSubmitting:d})]})})]})},$=({currency:t,isCheck:n,setIsCheck:c})=>{const{title:h,serviceId:r,handleModalOpen:x,handleUpdate:d}=F(),g=l=>{const{id:p,checked:u}=l.target;c([...n,p]),u||c(n.filter(b=>b!==p))};return e.jsxs(e.Fragment,{children:[n.length<1&&e.jsx(I,{id:r,title:h}),e.jsx(P,{children:e.jsx(_,{id:r})}),e.jsx(s.TableBody,{children:t==null?void 0:t.map(l=>e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{children:e.jsx(M,{type:"checkbox",name:l.symbol,id:l._id,handleClick:g,isChecked:n.includes(l._id)})}),e.jsx(s.TableCell,{className:"text-center",children:e.jsx("span",{className:"font-medium text-sm",children:l.name})}),e.jsx(s.TableCell,{className:"text-center",children:e.jsx("span",{className:"font-medium text-sm",children:l.symbol})}),e.jsx(s.TableCell,{className:"text-center",children:e.jsx(J,{id:l._id,status:l.status,currencyStatusName:"status"})}),e.jsx(s.TableCell,{children:e.jsx(L,{title:l.name,id:l._id,handleUpdate:d,handleModalOpen:x})})]},l._id))})]})},me=()=>{const{toggleDrawer:t}=j.useContext(E),{allId:n,handleUpdateMany:c,handleDeleteMany:h}=F(),{data:r,loading:x,error:d}=O(w.getAllCurrency),{totalResults:g,resultsPerPage:l,dataTable:p,handleChangePage:u,handleSubmitCurrency:b,currencyRef:N}=W(r),[y,f]=j.useState(!1),[o,a]=j.useState([]),C=()=>{f(!y),a(r.map(m=>m._id)),y&&a([])};return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:"Currencies"}),e.jsx(K,{ids:n,title:"Currencies"}),e.jsx(P,{children:e.jsx(_,{})}),e.jsx(I,{ids:n,setIsCheck:a,title:"Selected Currencies"}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsxs("form",{onSubmit:b,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex md:justify-between",children:[e.jsx("div",{className:"w-full",children:e.jsx(s.Input,{ref:N,type:"search",className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 border-transparent focus:bg-white",placeholder:i("SearchIsoCode")})}),e.jsxs("div",{className:"lg:flex  md:flex xl:justify-end xl:w-1/2  md:w-full md:justify-start flex-grow-0",children:[e.jsx("div",{className:"w-full md:w-40 lg:w-40 xl:w-40 mr-3 mb-3 lg:mb-0",children:e.jsxs(s.Button,{disabled:o.length<1,onClick:()=>c(o),className:"w-full rounded-md h-12 btn-gray text-gray-600",children:[e.jsx("span",{className:"mr-2",children:e.jsx(V,{})}),"Bulk Action"]})}),e.jsx("div",{className:"w-full md:w-32 lg:w-32 xl:w-32 mr-3 mb-3 lg:mb-0",children:e.jsxs(s.Button,{disabled:o.length<1,onClick:()=>h(o),className:"w-full rounded-md h-12 bg-red-500 btn-red",children:[e.jsx("span",{className:"mr-2",children:e.jsx(q,{})}),"Delete"]})}),e.jsxs(s.Button,{onClick:t,className:"rounded-md h-12 w-48",children:[e.jsx("span",{className:"mr-2",children:e.jsx(z,{})}),"Add Currency"]})]})]})})}),x?e.jsx(X,{row:12,col:7,width:163,height:20}):d?e.jsx("span",{className:"text-center mx-auto text-red-500",children:d}):r.length!==0&&e.jsxs(s.TableContainer,{className:"mb-8 rounded-b-lg",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:e.jsx(M,{type:"checkbox",name:"selectAll",id:"selectAll",isChecked:y,handleClick:C})}),e.jsx(s.TableCell,{className:"text-center",children:i("CurrenciesName")}),e.jsx(s.TableCell,{className:"text-center",children:i("CurrenciesSymbol")}),e.jsx(s.TableCell,{className:"text-center",children:i("CurrenciesEnabled")}),e.jsx(s.TableCell,{className:"text-right",children:i("CurrenciesActions")})]})}),e.jsx($,{currency:p,isCheck:o,setIsCheck:a})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:g,resultsPerPage:l,onChange:u,label:"Table navigation"})})]}),!x&&r.length===0&&!d&&e.jsx(Y,{title:"Sorry, There are no currency right now."})]})};export{me as default};
