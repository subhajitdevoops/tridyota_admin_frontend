import{j as e,t as ee,r as x,S as X,y as T}from"./index-bf82c2d2.js";import{t as se,C as ae,n as te,a2 as re,a3 as Y,A as U,R as J,a4 as de,a5 as ge,T as pe,l as me,a6 as ue,a7 as he,a8 as xe,v as Q,s as W}from"./Layout-175bf00a.js";import{b as m,n as R,u as be,L as c,E as D}from"./index.esm-47afe3d2.js";const Ne=({id:g,name:t,type:p,handleClick:j,isChecked:i})=>e.jsx(e.Fragment,{children:e.jsx("input",{id:g,name:t,type:p,onChange:j,checked:i})}),ve=({id:g,status:t,category:p,currencyStatusName:j})=>{const i=ee(),{setIsUpdate:d}=x.useContext(X),b=async r=>{var E,A;try{let a;if(t==="show"?a="hide":a="show",i.pathname==="/categories"||p){const l=await ae.updateStatus(r,{status:a});d(!0),m(l.message)}if(i.pathname==="/products"){const l=await te.updateStatus(r,{status:a});d(!0),m(l.message)}if(i.pathname==="/languages"){const l=await re.updateStatus(r,{status:a});d(!0),m(l.message)}if(i.pathname==="/currencies")if(j==="status"){const l=await Y.updateEnabledStatus(r,{status:a});d(!0),m(l.message)}else{const l=await Y.updateLiveExchangeRateStatus(r,{live_exchange_rates:a});d(!0),m(l.message)}if(i.pathname==="/attributes"){const l=await U.updateStatus(r,{status:a});d(!0),m(l.message)}if(i.pathname===`/attributes/${i.pathname.split("/")[2]}`){const l=await U.updateChildStatus(r,{status:a});d(!0),m(l.message)}if(i.pathname==="/coupons"){const l=await J.updateStatus(r,{status:a});d(!0),m(l.message)}if(i.pathname==="/our-staff"){const l=await J.updateStaffStatus(r,{status:a});d(!0),m(l.message)}}catch(a){R(a?(A=(E=a==null?void 0:a.response)==null?void 0:E.data)==null?void 0:A.message:a==null?void 0:a.message)}};return e.jsx(se,{onChange:()=>b(g),checked:t==="show",className:"react-switch md:ml-0",uncheckedIcon:e.jsx("div",{style:{display:"flex",alignItems:"center",height:"100%",width:120,fontSize:14,color:"white",paddingRight:22,paddingTop:1}}),width:30,height:15,handleDiameter:13,offColor:"#E53E3E",onColor:"#2F855A",checkedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:73,height:"100%",fontSize:14,color:"white",paddingLeft:20,paddingTop:1}})})},P=({title:g,handleProcess:t,processOption:p})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex flex-wrap items-center",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:g}),e.jsx(se,{onChange:t,checked:p,className:"react-switch md:ml-0 ml-3",uncheckedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",fontSize:14,color:"white",paddingRight:5,paddingTop:1},children:"No"}),width:80,height:30,handleDiameter:28,offColor:"#E53E3E",onColor:"#2F855A",checkedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",fontSize:14,color:"white",paddingLeft:8,paddingTop:1},children:"Yes"})})]})})}),Z=({register:g,name:t,label:p,placeholder:j,required:i,type:d,value:b})=>e.jsx(e.Fragment,{children:e.jsx(T.Textarea,{className:"border text-sm focus:outline-none block w-full bg-gray-100 border-transparent focus:bg-white",...g(`${t}`,{required:i?!1:`${p} is required!`}),type:d,placeholder:j,name:t,value:b,rows:"4",spellCheck:"false"})}),fe=(g,t="en",p)=>{const[j,i]=x.useState(""),[d,b]=x.useState([]),r=ee(),[E,A]=x.useState(""),[a,l]=x.useState(!0),[w,S]=x.useState(!0),[F,N]=x.useState([]),[L,q]=x.useState([]),[z,K]=x.useState(!1),[v,V]=x.useState(""),{isBulkDrawerOpen:M,closeBulkDrawer:k,setIsUpdate:C}=x.useContext(X),{register:_,handleSubmit:G,watch:O,setValue:o,clearErrors:n,formState:{errors:$}}=be(),H=async s=>{var y,u,I;try{const f={ids:g,categories:F==null?void 0:F.map(h=>h._id),category:(y=L[0])==null?void 0:y._id,productType:[z?"food":"others"],show:s.show,status:a?"show":"hide",tag:JSON.stringify(d)},B={ids:g,status:a?"show":"hide"},le={ids:g,enabled:a?"show":"hide",live_exchange_rates:w?"show":"hide"},ne={ids:g,parentId:E,description:s.description,parentName:v,status:a?"show":"hide"},oe={ids:g,option:s.option,status:a?"show":"hide"},ie={ids:g,currentId:p,changeId:s.groupName,status:a?"show":"hide"},ce={ids:g,startTime:s.startTime,endTime:s.endTime,status:a?"show":"hide"};if(r.pathname==="/products"){const h=await te.updateManyProducts(f);C(!0),m(h.message),k()}if(r.pathname==="/coupons"){const h=await J.updateManyCoupons(ce);C(!0),m(h.message),k()}if(r.pathname==="/languages"){const h=await re.updateManyLanguage(B);C(!0),m(h.message),k()}if(r.pathname==="/currencies"){const h=await Y.updateManyCurrencies(le);C(!0),m(h.message),k()}if(r.pathname==="/categories"||r.pathname===`/categories/${p}`){const h=await ae.updateManyCategory(ne);C(!0),m(h.message),k()}if(r.pathname==="/attributes"){const h=await U.updateManyAttribute(oe);C(!0),m(h.message),k()}if(r.pathname===`/attributes/${r.pathname.split("/")[2]}`){const h=await U.updateManyChildAttribute(ie);C(!0),m(h.message),k()}}catch(f){R(f?(I=(u=f==null?void 0:f.response)==null?void 0:u.data)==null?void 0:I.message:f.message)}};return x.useEffect(()=>{if(!M){o("parent"),o("children"),o("type"),o("show"),o("name"),i(""),b([]),n("parent"),n("children"),n("type"),n("name"),o("name"),o("iso_code"),o("call_prefix"),o("currency"),o("zone"),n("name"),n("iso_code"),n("call_prefix"),n("currency"),n("zone"),n("status"),o("name"),o("iso_code"),o("country"),o("zone"),o("description"),n("name"),n("iso_code"),n("country"),n("zone"),n("status"),n("show"),n("description"),q([]),N([]);return}},[o,M,n]),x.useEffect(()=>{i(O("children"))},[O,j]),{register:_,watch:O,handleSubmit:G,onSubmit:H,errors:$,tag:d,setTag:b,published:a,setPublished:l,published2:w,setPublished2:S,checked:E,setChecked:A,selectedCategory:F,setSelectedCategory:N,defaultCategory:L,setDefaultCategory:q,selectCategoryName:v,setSelectCategoryName:V,isFoodItem:z,setIsFoodItem:K}},Se=({ids:g,title:t,lang:p,data:j,childId:i,attributes:d,isCheck:b})=>{const{toggleBulkDrawer:r,isBulkDrawerOpen:E,closeBulkDrawer:A}=x.useContext(X),{tag:a,setTag:l,published:w,register:S,onSubmit:F,errors:N,checked:L,setChecked:q,resetRefTwo:z,handleSubmit:K,setPublished:v,selectedCategory:V,setSelectedCategory:M,defaultCategory:k,setDefaultCategory:C,selectCategoryName:_,setSelectCategoryName:G}=fe(g,p,i),O={motionName:"node-motion",motionAppear:!1,onAppearStart:s=>({height:0}),onAppearActive:s=>({height:s.scrollHeight}),onLeaveStart:s=>({height:s.offsetHeight}),onLeaveActive:()=>({height:0})},o=s=>{let y=[];for(let u of s)y.push({title:W(u==null?void 0:u.name,p),key:u._id,children:u.children.length>0&&o(u.children)});return y},n=(s,y)=>{var u;return s._id===y?s:(u=s==null?void 0:s.children)==null?void 0:u.reduce((I,f)=>I??n(f,y),void 0)},$=s=>{var u,I;const y=b==null?void 0:b.find(f=>f===s);if((b==null?void 0:b.length)===((I=(u=j[0])==null?void 0:u.children)==null?void 0:I.length))return R("This can't be select as a parent category!");if(y!==void 0)return R("This can't be select as a parent category!");if(s===i)return R("This can't be select as a parent category!");{if(s===void 0)return;q(s);const f=j[0],B=n(f,s);G(W(B==null?void 0:B.name,p))}},H=`
  .rc-tree-child-tree {
    display: hidden;
  }
  .node-motion {
    transition: all .3s;
    overflow-y: hidden;
  }
`;return e.jsx(e.Fragment,{children:e.jsxs(de,{open:E,onClose:A,parent:null,level:null,placement:"right",children:[e.jsx("button",{onClick:r,className:"absolute focus:outline-none z-50 text-red-500 hover:bg-red-100 hover:text-gray-700 transition-colors duration-150 bg-white shadow-md mr-6 mt-6 right-0 left-auto w-10 h-10 rounded-full block text-center",children:e.jsx(ge,{className:"mx-auto"})}),e.jsxs("div",{className:"flex flex-col w-full h-full justify-between",children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:e.jsx(pe,{title:`Update Selected ${t}`,description:`Apply changes to the selected ${t} from the list`})}),e.jsx(me.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:K(F),className:"block",children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow w-full h-full max-h-full pb-40 md:pb-32 lg:pb-32 xl:pb-32",children:[t==="Products"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Categorys"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(ue,{lang:p,selectedCategory:V,setSelectedCategory:M,setDefaultCategory:C})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Default Category"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(he,{displayValue:"name",isObject:!0,singleSelect:!0,ref:z,hidePlaceholder:!0,onKeyPressFn:function(){},onRemove:function(){},onSearch:function(){},onSelect:s=>C(s),selectedValues:k,options:V,placeholder:"Default Category"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(P,{handleProcess:v,processOption:w}),e.jsx(D,{errorName:N.status})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Product Tags"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(xe,{placeholder:"Product Tag (Write then press enter to add new tag )",tags:a,onChange:s=>l(s)})})]})]}),t==="Coupons"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Start Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(T.Input,{...S("startTime",{required:"Coupon Validation Start Time"}),label:"Coupon Validation Start Time",name:"startTime",type:"datetime-local",placeholder:"Start Time",className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white"}),e.jsx(D,{errorName:N.startTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"End Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(T.Input,{...S("endTime",{required:"Coupon Validation End Time"}),label:"Coupon Validation End Time",name:"endTime",type:"datetime-local",placeholder:"End Time",className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white"}),e.jsx(D,{errorName:N.endTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(P,{handleProcess:v,processOption:w}),e.jsx(D,{errorName:N.published})]})]})]}),t==="Languages"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(P,{title:"",processOption:w,handleProcess:v})})]})}),t==="Currencies"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Enabled"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(P,{title:"",processOption:w,handleProcess:v})})]})}),t==="Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(Z,{required:!0,register:S,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(D,{errorName:N.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(T.Input,{readOnly:!0,...S("parent",{required:!1}),name:"parent",value:_||"Home",placeholder:"parent category",type:"text",className:"border h-12 w-full text-sm focus:outline-none block bg-gray-100 dark:bg-white border-transparent focus:bg-white"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:H}}),e.jsx(Q,{treeData:o(j),selectedKeys:[L],onSelect:s=>$(s[0]),motion:O,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(P,{title:"",processOption:w,handleProcess:v})})]})]}),t==="Child Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(Z,{required:!0,register:S,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(D,{errorName:N.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(T.Input,{readOnly:!0,...S("parent",{required:!1}),name:"parent",value:_||"Home",placeholder:"parent category",type:"text",className:"border h-12 w-full text-sm focus:outline-none block bg-gray-100 dark:bg-white border-transparent focus:bg-white"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:H}}),e.jsx(Q,{treeData:o(j),selectedKeys:[L],onSelect:s=>$(s[0]),motion:O,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(P,{title:"",processOption:w,handleProcess:v})})]})]}),t==="Attributes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Options"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(T.Select,{className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white",name:"option",...S("option",{required:"Option is required!"}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select type"}),e.jsx("option",{value:"Dropdown",children:"Dropdown"}),e.jsx("option",{value:"Radio",children:"Radio"})]}),e.jsx(D,{errorName:N.option})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(P,{title:"",processOption:w,handleProcess:v})})]})]}),t==="Attribute Value(s)"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Change Attribute Group"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(T.Select,{className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white",name:"groupName",...S("groupName",{required:!1}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select Attribute Group"}),d==null?void 0:d.map((s,y)=>e.jsx("option",{value:s._id,children:W(s==null?void 0:s.name,p)},y+1))]}),e.jsx(D,{errorName:N.groupName})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(c,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(P,{title:"",processOption:w,handleProcess:v})})]})]})]}),e.jsxs("div",{className:"fixed bottom-0 w-full right-0 py-4 lg:py-8 px-6 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex bg-gray-50 border-t border-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:[e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(T.Button,{onClick:r,className:"h-12 bg-white w-full text-red-500 hover:bg-red-50 hover:border-red-100 hover:text-red-600 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-500 dark:hover:bg-gray-800 dark:hover:text-red-700",layout:"outline",children:"Cancel"})}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(T.Button,{type:"submit",className:"w-full h-12",children:[" ","Bulk Update ",t]})})]})]})})]})]})})};export{Se as B,Ne as C,ve as S,Z as T,P as a};
