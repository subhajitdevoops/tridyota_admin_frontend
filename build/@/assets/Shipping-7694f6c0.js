import{r as t,S as K,x as Q,j as e,y as a}from"./index-bf82c2d2.js";import{x as $,T as ee,U as W,d as X,e as se,E as ae,s as re,P as le,M as ie}from"./Layout-175bf00a.js";import{u as Y,n as N,b as J,L as p,E}from"./index.esm-47afe3d2.js";import"./iconBase-d3779ff1.js";import"./InputArea-3fddad50.js";const ne=()=>{const{register:c,handleSubmit:d,setValue:l,clearErrors:i,formState:{errors:T}}=Y(),{toggleDrawer:m,isDrawerOpen:j,currentPage:w,toggleModal:S,limitData:C,toggleBulkDrawer:r,taxEdit:I,setTaxEdit:U}=t.useContext(K),[g,k]=t.useState([]),[h,x]=t.useState(""),[o,n]=t.useState(""),[u,M]=t.useState(""),[D,q]=t.useState(""),[P,V]=t.useState(""),[R,L]=t.useState("");console.log("shipping details",{shippingIcon:g,shippingMethod:h,shippingCharges:o,deliveryTime:u});const F=s=>{setTaxType(s)},Z=s=>{l("shippingMethod",s),x(s),console.log("value",s)},A=s=>/^\d+$/.test(s),_=s=>{A(s)?(l("shippingCharges",s.toLowerCase().replace(/[^A-Z0-9]+/gi,"-")),n(s.toLowerCase().replace(/[^A-Z0-9]+/gi,"-"))):N("Please enter valid amount")},z=s=>{A(s)?(l("deliveryTime",s.toLowerCase().replace(/[^A-Z0-9]+/gi,"-")),M(s.toLowerCase().replace(/[^A-Z0-9]+/gi,"-"))):N("Please enter valid amount")},G=()=>{let s=0;g.length===0&&(s=s+1,N("Please select Icon.")),h.trim().length==0&&(s=s+1,N("Please enter shipping method.")),u&&parseInt(u,10)==0&&(s=s+1,N("please give Delivery date.")),s===0&&B()},B=()=>{let s={id:D||"",shippingMethod:h,icon:g.length>0?g[0]:"",cost:parseInt(o,10),deliveryTime:u};$.postShipping(s).then(v=>{(v==null?void 0:v.success)===!0?(J(v.message),D&&m(),l("shippingMethod",""),x(""),l("shippingCharges",""),n(""),l("deliveryTime",""),M(""),k([]),i("shippingMethod"),i("shippingCharges"),i("deliveryTime"),H()):N(v.message)})},y=()=>{setTaxName(""),setTaxAmount(""),l("taxAmount",""),l("taxName",""),setTaxType("PERCENTAGE (%)"),i("taxAmount"),i("taxName")},O=s=>{m(),[...P].forEach((b,ge)=>{b._id===s&&(l("shippingMethod",b.shippingMethod),x(b.shippingMethod),l("shippingCharges",b.cost),n(b.cost),l("deliveryTime",b.deliveryTime),M(b.deliveryTime),k([b.icon]),q(s))})},f=()=>{setTaxName(""),setTaxAmount(""),l("taxAmount",""),l("taxName",""),setTaxType("PERCENTAGE (%)"),i("taxAmount"),i("taxName"),m(),y()},H=()=>{$.getShipping({page:w,limit:C}).then(s=>{(s==null?void 0:s.success)===!0?(J(s==null?void 0:s.message),V(s==null?void 0:s.shippingDetailsdData),L(s==null?void 0:s.Pagination)):N(s==null?void 0:s.message)})};return{shippingIcon:g,setShippingIcon:k,shippingMethod:h,shippingCharges:o,register:c,handleSubmit:d,setValue:l,clearErrors:i,errors:T,deliveryTime:u,shippingPage:R,handleShippingMethod:Z,handleShippingCharges:_,handleSelectType:F,handleDeliveryTime:z,onSubmit:G,handleCancel:y,handleUpdate:O,shippingResponse:P,getShippingDetails:H,cancelUpdate:f,validation:B}},te=({id:c,isSubmitting:d,shippingIcon:l,setShippingIcon:i,handleShippingMethod:T,shippingMethod:m,shippingCharges:j,deliveryTime:w,UpdateShippingData:S,cancelUpdate:C,handleShippingCharges:r,handleDeliveryTime:I})=>{const{t:U}=Q(),{register:g,handleSubmit:k,setValue:h,clearErrors:x,formState:{errors:o}}=Y();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:" h-full flex flex-col gap-6 dark:bg-gray-800 mb-5",children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:e.jsx(ee,{register:g,title:"Update shipping",description:" Please provide correct information !"})}),e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:U("Icon")}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(W,{product:!0,folder:"product",imageUrl:l,setImageUrl:i})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Shipping Method"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(a.Input,{...g("shippingMethod",{required:"Shipping Method is required!"}),className:"border h-12 text-sm focus:outline-none block w-full   dark:bg-gray-700 border-transparent ",name:"shippingMethod",type:"text",defaultValue:m,placeholder:"Enter Shipping Method.",onBlur:n=>T(n.target.value)}),e.jsx(E,{errorName:o.shippingMethod})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Charges"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(a.Input,{...g("shippingCharges",{required:"shipping Charges is required!"}),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-gray-700 border-transparent",name:"shippingCharges",type:"number",defaultValue:j,placeholder:"Please Enter shipping Charges",onBlur:n=>r(n.target.value)}),e.jsx(E,{errorName:o.shippingCharges})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Delivery Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(a.Input,{...g("deliveryTime",{required:"Delivery Time is required!"}),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-gray-700 border-transparent",name:"deliveryTime",type:"number",defaultValue:w,placeholder:"Please Enter time",onBlur:n=>I(n.target.value)}),e.jsx(E,{errorName:o.deliveryTime})]})]})]}),e.jsx("div",{className:" z-10  w-full py-4 lg:py-8 px-6 grid gap-4 lg:gap-6 xl:gap-6 bg-gray-50 border-t border-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{}),e.jsxs("div",{className:"col-span-8 sm:col-span-4 flex gap-1 justify-between w-full",children:[e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(a.Button,{onClick:()=>C(),className:"h-12 bg-white w-full text-red-500 hover:bg-red-50 hover:border-red-100 hover:text-red-600 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-500 dark:hover:bg-gray-800 dark:hover:text-red-700",layout:"outline",children:"Cancel"})}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow flex-row",children:d?e.jsxs(a.Button,{disabled:!0,type:"button",className:"w-full h-12",children:[e.jsx("img",{src:spinnerLoadingImage,alt:"Loading",width:20,height:10})," ",e.jsx("span",{className:"font-serif ml-2 font-light",children:"Processing"})]}):e.jsx(a.Button,{type:"submit",className:"w-full h-12",onClick:()=>S(),children:c?e.jsx("span",{children:U("UpdateBtn")}):e.jsx("span",{children:"Update"})})})]})]})})]})})},de=({shippingList:c,isCheck:d,setIsCheck:l,currency:i,lang:T,handleUpdate:m,getShippingDetails:j})=>{const{title:w,serviceId:S,handleModalOpen:C}=X();return e.jsxs(e.Fragment,{children:[(d==null?void 0:d.length)<1&&e.jsx(se,{id:S,title:w,fetchData:j}),e.jsx(a.TableBody,{children:c==null?void 0:c.map((r,I)=>e.jsxs(a.TableRow,{children:[e.jsx(a.TableCell,{children:e.jsxs("div",{className:"flex items-center",children:[r!=null&&r.icon?e.jsx(a.Avatar,{className:"hidden p-1 mr-2 md:block bg-gray-50 shadow-none",src:r==null?void 0:r.icon,alt:"product"}):e.jsx(a.Avatar,{src:"https://res.cloudinary.com/ahossain/image/upload/v1655097002/placeholder_kvepfp.png",alt:"product"}),e.jsx("div",{children:e.jsx("h2",{className:"text-sm font-medium",children:r==null?void 0:r.shippingMethod})})]})}),e.jsx(a.TableCell,{children:e.jsx("span",{className:"text-sm",children:r==null?void 0:r.cost})}),e.jsx(a.TableCell,{children:e.jsx("span",{className:"text-sm",children:r==null?void 0:r.deliveryTime})}),e.jsx(a.TableCell,{children:e.jsx(ae,{id:r._id,Product:r,isCheck:d,handleUpdate:m,handleModalOpen:C,title:re(r==null?void 0:r.shippingMethod,T)})})]},I+1))})]})},xe=({id:c})=>{const{title:d,allId:l,serviceId:i,handleDeleteMany:T,handleUpdateMany:m}=X(),{t:j}=Q(),{toggleDrawer:w,lang:S,currentPage:C,handleChangePage:r,searchText:I,category:U,sortedField:g,limitData:k}=t.useContext(K),{register:h,errors:x,shippingMethod:o,deliveryTime:n,isSubmitting:u,shippingIcon:M,setShippingIcon:D,shippingCharges:q,shippingPage:P,handleShippingMethod:V,handleShippingCharges:R,handleDeliveryTime:L,onSubmit:F,handleCancel:Z,getShippingDetails:A,handleUpdate:_,cancelUpdate:z,validation:G,shippingResponse:B}=ne();t.useState(!1);const[y,O]=t.useState([]);return t.useEffect(()=>{A()},[]),e.jsxs(e.Fragment,{children:[e.jsx(le,{children:"Shipping Details"}),e.jsx(ie,{children:e.jsx(te,{id:i,isSubmitting:u,setShippingIcon:D,shippingIcon:M,shippingMethod:o,shippingCharges:q,deliveryTime:n,UpdateShippingData:G,cancelUpdate:z,handleShippingMethod:V,handleShippingCharges:R,handleDeliveryTime:L})}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:j("Icon")}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(W,{product:!0,folder:"product",imageUrl:M,setImageUrl:D})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Shipping Method"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(a.Input,{...h("shippingMethod",{required:"Shipping Method is required!"}),className:"border h-12 text-sm focus:outline-none block w-full   dark:bg-gray-700 border-transparent ",name:"shippingMethod",type:"text",defaultValue:o,placeholder:"Enter Shipping Method.",onBlur:f=>V(f.target.value)}),e.jsx(E,{errorName:x.shippingMethod})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Charges"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(a.Input,{...h("shippingCharges",{required:"shipping Charges is required!"}),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-gray-700 border-transparent",name:"shippingCharges",type:"number",defaultValue:q,placeholder:"Please Enter shipping Charges",onBlur:f=>R(f.target.value)}),e.jsx(E,{errorName:x.shippingCharges})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Delivery Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(a.Input,{...h("deliveryTime",{required:"Delivery Time is required!"}),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-gray-700 border-transparent",name:"deliveryTime",type:"number",defaultValue:n,placeholder:"Please Enter time",onBlur:f=>L(f.target.value)}),e.jsx(E,{errorName:x.deliveryTime})]})]}),e.jsx("div",{className:" z-10  w-full py-4 lg:py-8 px-6 grid gap-4 lg:gap-6 xl:gap-6 bg-gray-50 border-t border-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{}),e.jsxs("div",{className:"col-span-8 sm:col-span-4 flex gap-1 justify-between w-full",children:[e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(a.Button,{onClick:()=>Z(),className:"h-12 bg-white w-full text-red-500 hover:bg-red-50 hover:border-red-100 hover:text-red-600 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-500 dark:hover:bg-gray-800 dark:hover:text-red-700",layout:"outline",children:"Cancel"})}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow flex-row",children:u?e.jsxs(a.Button,{disabled:!0,type:"button",className:"w-full h-12",children:[e.jsx("img",{src:spinnerLoadingImage,alt:"Loading",width:20,height:10})," ",e.jsx("span",{className:"font-serif ml-2 font-light",children:"Processing"})]}):e.jsx(a.Button,{type:"submit",className:"w-full h-12",onClick:F,children:c?e.jsxs("span",{children:[j("UpdateBtn")," ",d]}):e.jsxs("span",{children:["ADD ",d]})})})]})]})}),B.length>0&&e.jsxs(a.TableContainer,{className:"mb-8 rounded-b-lg",children:[e.jsxs(a.Table,{children:[e.jsx(a.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(a.TableCell,{children:"Shipping Name"}),e.jsx(a.TableCell,{children:"Shipping charge"}),e.jsx(a.TableCell,{children:"Delivery Time"}),e.jsx(a.TableCell,{children:e.jsx("button",{disabled:(y==null?void 0:y.length)>0,className:"p-2 w-full  flex gap-0 items-center justify-end text-base cursor-pointer dark:text-gray-400",children:"Edit/Delete"})})]})}),e.jsx(de,{lang:S,isCheck:y,shippingList:B,setIsCheck:O,handleUpdate:_,getShippingDetails:A})]}),e.jsx(a.TableFooter,{children:e.jsx(a.Pagination,{totalResults:P==null?void 0:P.TotalPages,resultsPerPage:k,onChange:r,label:"Product Page Navigation"})})]})]})};export{xe as default};
