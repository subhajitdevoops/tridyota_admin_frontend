import{r as y,S as v,j as e,y as s,L as S,w as D,x as E}from"./index-bf82c2d2.js";import{U as P}from"./UploadManyTwo-e37037ed.js";import{d as A}from"./dayjs.min-61f3a08c.js";import{G as N,T as w,S as F,D as I,d as U,e as k,M,f as B,H as L,E as R,u as Y,P as _}from"./Layout-175bf00a.js";import{u as q,n as T,b as H,L as b,E as u}from"./index.esm-47afe3d2.js";import{I as f}from"./InputArea-3fddad50.js";import{T as O}from"./TableLoading-800c8975.js";import{N as V}from"./NotFound-90d3264e.js";import{u as G}from"./useFilter-ec5bd7bd.js";import"./exportFromJSON-59a1cb7c.js";import"./iconBase-d3779ff1.js";import"./xlsx-04f2268f.js";const J=a=>{const[t,n]=y.useState(""),{closeDrawer:m,setIsUpdate:o}=y.useContext(v),{register:l,handleSubmit:g,setValue:x,formState:{errors:p}}=q(),j=async i=>{var h,r;try{const d={name:i.name,email:i.email,phone:i.phone,address:i.address};if(a){const C=await N.updateCustomer(a,d);o(!0),H(C.message),m()}}catch(d){T(d?(r=(h=d==null?void 0:d.response)==null?void 0:h.data)==null?void 0:r.message:d.message),m()}};return y.useEffect(()=>{a&&(async()=>{var i,h;try{const r=await N.getCustomerById(a);r&&(x("name",r.name),x("phone",r.phone),x("email",r.email),x("address",r.address))}catch(r){T(r?(h=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:h.message:r.message)}})()},[a,x]),{register:l,handleSubmit:g,onSubmit:j,errors:p,setImageUrl:n,imageUrl:t}},Z=({id:a})=>{const{register:t,handleSubmit:n,onSubmit:m,errors:o}=J(a);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:a?e.jsx(w,{title:"Update Customer",description:"Update your Customer necessary information from here"}):e.jsx(w,{title:"Add Customer",description:"Add your Customer necessary information from here"})}),e.jsx(F,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:n(m),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(b,{label:"Name"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(f,{register:t,label:"Name",name:"name",type:"text",placeholder:"Name"}),e.jsx(u,{errorName:o.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(b,{label:"Email"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(f,{register:t,label:"Email",name:"email",type:"email",placeholder:"Email"}),e.jsx(u,{errorName:o.email})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(b,{label:"Phone"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(f,{required:!0,register:t,label:"Phone",name:"phone",type:"text",placeholder:"Phone"}),e.jsx(u,{errorName:o.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(b,{label:"Address"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(f,{required:!0,register:t,label:"Address",name:"address",type:"text",placeholder:"Address"}),e.jsx(u,{errorName:o.address})]})]})]}),e.jsx(I,{id:a,title:"Customer"})]})})]})},$=({customers:a})=>{const{title:t,serviceId:n,handleModalOpen:m,handleUpdate:o}=U();return e.jsxs(e.Fragment,{children:[e.jsx(k,{id:n,title:t}),e.jsx(M,{children:e.jsx(Z,{id:n})}),e.jsx(s.TableBody,{children:a==null?void 0:a.map(l=>{var g;return e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{children:e.jsxs("span",{className:"font-semibold uppercase text-xs",children:[" ",(g=l==null?void 0:l._id)==null?void 0:g.substring(20,24)]})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:A(l.createdAt).format("MMM D, YYYY")})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:l.name})}),e.jsxs(s.TableCell,{children:[e.jsx("span",{className:"text-sm",children:l.email})," "]}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm font-medium",children:l.phone})}),e.jsx(s.TableCell,{children:e.jsxs("div",{className:"flex justify-end text-right",children:[e.jsxs("div",{className:"p-2 cursor-pointer text-gray-400 hover:text-green-600",children:[" ",e.jsx(S,{to:`/customer-order/${l._id}`,children:e.jsx(B,{id:"view",Icon:L,title:D("ViewOrder"),bgColor:"#34D399"})})]}),e.jsx(R,{title:l.name,id:l._id,handleUpdate:o,handleModalOpen:m})]})})]},l._id)})})]})},ne=()=>{const{data:a,loading:t,error:n}=Y(N.getAllCustomers),{userRef:m,handleChangePage:o,totalResults:l,resultsPerPage:g,dataTable:x,serviceData:p,handleSubmitUser:j,filename:i,isDisabled:h,handleSelectFile:r,handleUploadMultiple:d,handleRemoveSelectFile:C}=G(a),{t:c}=E();return e.jsxs(e.Fragment,{children:[e.jsx(_,{children:c("CustomersPage")}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsx("form",{onSubmit:j,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:e.jsx("div",{className:"items-center",children:e.jsx(P,{title:"Customers",exportData:a,filename:i,isDisabled:h,handleSelectFile:r,handleUploadMultiple:d,handleRemoveSelectFile:C})})})})}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsx("form",{onSubmit:j,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:e.jsxs("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx(s.Input,{ref:m,className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 border-transparent focus:bg-white",type:"search",name:"search",placeholder:c("CustomersPageSearchPlaceholder")}),e.jsx("button",{type:"submit",className:"absolute right-0 top-0 mt-5 mr-1"})]})})})}),t?e.jsx(O,{row:12,col:6,width:190,height:20}):n?e.jsx("span",{className:"text-center mx-auto text-red-500",children:n}):(p==null?void 0:p.length)!==0?e.jsxs(s.TableContainer,{className:"mb-8",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:c("CustomersId")}),e.jsx(s.TableCell,{children:c("CustomersJoiningDate")}),e.jsx(s.TableCell,{children:c("CustomersName")}),e.jsx(s.TableCell,{children:c("CustomersEmail")}),e.jsx(s.TableCell,{children:c("CustomersPhone")}),e.jsx(s.TableCell,{className:"text-right",children:c("CustomersActions")})]})}),e.jsx($,{customers:x})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:l,resultsPerPage:g,onChange:o,label:"Table navigation"})})]}):e.jsx(V,{title:"Sorry, There are no customers right now."})]})};export{ne as default};
