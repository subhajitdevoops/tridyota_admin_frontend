import{r as j,S as B,x as V,j as e,y as t}from"./index-bf82c2d2.js";import{u as H,P as J,K,L as $}from"./Layout-175bf00a.js";import{e as f}from"./exportFromJSON-59a1cb7c.js";import{u as q}from"./useFilter-ec5bd7bd.js";import{O as y}from"./OrderServices-c564e9f9.js";import{N as z}from"./NotFound-90d3264e.js";import{O as G}from"./OrderTable-c15e5e63.js";import{T as Q}from"./TableLoading-800c8975.js";import{n as U}from"./index.esm-47afe3d2.js";import"./iconBase-d3779ff1.js";import"./InputArea-3fddad50.js";import"./dayjs.min-61f3a08c.js";import"./xlsx-04f2268f.js";import"./dateFormate-88a07b91.js";import"./index-f309a530.js";import"./SelectStatus-58601f18.js";import"./Status-56063b9e.js";const ge=()=>{var g,m;const{time:v,setTime:T,currentPage:w,searchText:C,searchRef:N,status:O,setStatus:D,handleChangePage:S,handleSubmitForAll:P,resultsPerPage:u,startDate:A,setStartDate:k,endDate:E,setEndDate:L,lang:I}=j.useContext(B),{t:s}=V(),[i,d]=j.useState(!1),{data:l,loading:F,error:h}=H(()=>y.getAllOrders({customerName:C,status:O,page:w,limit:u,day:v,startDate:A,endDate:E})),{dataTable:_,serviceData:c,globalSetting:o}=q(l==null?void 0:l.orders),M=async()=>{var a,x,p;try{d(!0);const n=await y.getAllOrders({customerName:"",status:null,page:null,limit:null,day:null,startDate:null,endDate:null}),R=(a=n==null?void 0:n.orders)==null?void 0:a.map(r=>{var b;return{_id:r._id,invoice:r.invoice,subTotal:r.subTotal,shippingCost:r.shippingCost,discount:r==null?void 0:r.discount,total:r.total,paymentMethod:r.paymentMethod,status:r.status,user_info:(b=r==null?void 0:r.user_info)==null?void 0:b.name,createdAt:r.createdAt,updatedAt:r.updatedAt}});f({data:R,fileName:"orders",exportType:f.types.csv}),d(!1)}catch(n){d(!1),U(n?(p=(x=n==null?void 0:n.response)==null?void 0:x.data)==null?void 0:p.message:n.message)}};return e.jsxs(e.Fragment,{children:[e.jsx(J,{children:s("Orders")}),e.jsx(t.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(t.CardBody,{children:e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"grid gap-4 lg:gap-6 xl:gap-6 lg:grid-cols-3 xl:grid-cols-3 md:grid-cols-3 sm:grid-cols-1 py-2",children:[e.jsx("div",{children:e.jsx(t.Input,{ref:N,type:"search",name:"search",className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 border-transparent focus:bg-white",placeholder:"Search by Customer Name"})}),e.jsx("div",{children:e.jsxs(t.Select,{onChange:a=>D(a.target.value),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 border-transparent focus:bg-white",children:[e.jsx("option",{value:"Status",defaultValue:!0,hidden:!0,children:s("Status")}),e.jsx("option",{value:"Delivered",children:s("PageOrderDelivered")}),e.jsx("option",{value:"Pending",children:s("PageOrderPending")}),e.jsx("option",{value:"Processing",children:s("PageOrderProcessing")}),e.jsx("option",{value:"Cancel",children:s("OrderCancel")})]})}),e.jsx("div",{children:e.jsxs(t.Select,{onChange:a=>T(a.target.value),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 border-transparent focus:bg-white",children:[e.jsx("option",{value:"Order limits",defaultValue:!0,hidden:!0,children:s("Orderlimits")}),e.jsx("option",{value:"5",children:s("DaysOrders5")}),e.jsx("option",{value:"7",children:s("DaysOrders7")}),e.jsx("option",{value:"15",children:s("DaysOrders15")}),e.jsx("option",{value:"30",children:s("DaysOrders30")})]})})]}),e.jsxs("div",{className:"grid gap-4 lg:gap-6 xl:gap-6 lg:grid-cols-3 xl:grid-cols-3 md:grid-cols-3 sm:grid-cols-1 py-2",children:[e.jsxs("div",{children:[e.jsx(t.Label,{children:"Start Date"}),e.jsx(t.Input,{type:"date",name:"startDate",className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 border-transparent focus:bg-white",onChange:a=>k(a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t.Label,{children:"End Date"}),e.jsx(t.Input,{type:"date",name:"startDate",className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 border-transparent focus:bg-white",onChange:a=>L(a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t.Label,{style:{visibility:"hidden"},children:s("Download")}),i?e.jsxs(t.Button,{disabled:!0,type:"button",className:"h-12 w-full",children:[e.jsx("img",{src:K,alt:"Loading",width:20,height:10})," ",e.jsx("span",{className:"font-serif ml-2 font-light",children:"Processing"})]}):e.jsxs("button",{onClick:M,disabled:((g=l==null?void 0:l.orders)==null?void 0:g.length)<=0||i,type:"button",className:`${(((m=l==null?void 0:l.orders)==null?void 0:m.length)<=0||i)&&"opacity-50 cursor-not-allowed bg-red-300"} flex items-center justify-center text-sm leading-5 h-12 w-full text-center transition-colors duration-150 font-medium focus:outline-none px-6 py-2 rounded-md text-white bg-green-500 border border-transparent active:bg-green-600 hover:bg-green-600 focus:ring focus:ring-purple-300`,children:["Download All Orders",e.jsx("span",{className:"ml-2 text-base",children:e.jsx($,{})})]})]})]})]})})}),F?e.jsx(Q,{row:12,col:7,width:160,height:20}):h?e.jsx("span",{className:"text-center mx-auto text-red-500",children:h}):(c==null?void 0:c.length)!==0?e.jsxs(t.TableContainer,{className:"mb-8 dark:bg-gray-900",children:[e.jsxs(t.Table,{children:[e.jsx(t.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(t.TableCell,{children:s("InvoiceNo")}),e.jsx(t.TableCell,{children:s("TimeTbl")}),e.jsx(t.TableCell,{children:s("CustomerName")}),e.jsx(t.TableCell,{children:s("MethodTbl")}),e.jsx(t.TableCell,{children:s("AmountTbl")}),e.jsx(t.TableCell,{children:s("OderStatusTbl")}),e.jsx(t.TableCell,{children:s("ActionTbl")}),e.jsx(t.TableCell,{className:"text-right",children:s("InvoiceTbl")})]})}),e.jsx(G,{lang:I,orders:_,globalSetting:o,currency:(o==null?void 0:o.default_currency)||"â‚¹"})]}),e.jsx(t.TableFooter,{children:e.jsx(t.Pagination,{totalResults:l==null?void 0:l.totalDoc,resultsPerPage:u,onChange:S,label:"Table navigation"})})]}):e.jsx(z,{title:"Sorry, There are no orders right now."})]})};export{ge as default};
