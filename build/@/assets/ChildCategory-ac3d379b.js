import{M as _,r as o,S as R,x as H,j as e,L as k,y as l}from"./index-bf82c2d2.js";import{d as U,u as V,P as $,e as q,j as z,s as G,i as J,g as K,h as O,C as Q}from"./Layout-175bf00a.js";import{a as W}from"./CategoryTable-32b59509.js";import{B as X,C as Y}from"./BulkActionDrawer-e925344e.js";import{L as Z}from"./Loading-88ae9504.js";import{N as ee}from"./NotFound-90d3264e.js";import{u as se}from"./useFilter-ec5bd7bd.js";import"./iconBase-d3779ff1.js";import"./index.esm-47afe3d2.js";import"./InputArea-3fddad50.js";import"./dayjs.min-61f3a08c.js";import"./xlsx-04f2268f.js";const ue=()=>{const{id:d}=_(),[c,A]=o.useState([]),[j,v]=o.useState([]),[f,P]=o.useState(!1),[h,m]=o.useState([]),{toggleDrawer:S,lang:p}=o.useContext(R),{handleDeleteMany:B,allId:b,handleUpdateMany:F}=U(),{data:x,loading:u,error:N}=V(Q.getAllCategory),{t}=H();o.useEffect(()=>{var y,w;const a=(s,n,i=[])=>{for(let r of n){if(r._id===s)return i.concat(r);const C=a(s,r==null?void 0:r.children,i==null?void 0:i.concat(r));if(C)return C}},g=(s,n)=>{var i;return(s==null?void 0:s._id)===n?s:(i=s==null?void 0:s.children)==null?void 0:i.reduce((r,C)=>r??g(C,n),void 0)};if(!u){const s=g(x[0],d),n=a(d,(y=x[0])==null?void 0:y.children);((w=s==null?void 0:s.children)==null?void 0:w.length)>0&&(A(s==null?void 0:s.children),v(n))}},[d,u,x,c]);const{totalResults:I,resultsPerPage:D,dataTable:E,serviceData:T,handleChangePage:L}=se(c),M=()=>{P(!f),m(c==null?void 0:c.map(a=>a._id)),f&&m([])};return e.jsxs(e.Fragment,{children:[e.jsx($,{children:t("CategoryPageTitle")}),e.jsx(q,{ids:b,setIsCheck:m,category:!0}),e.jsx(X,{ids:b,title:"Child Categories",lang:p,data:x,childId:d}),e.jsx("div",{className:"flex items-center pb-4",children:e.jsxs("ol",{className:"flex items-center w-full overflow-hidden font-serif",children:[e.jsx("li",{className:"text-sm pr-1 transition duration-200 ease-in cursor-pointer hover:text-emerald-500 font-semibold",children:e.jsx(k,{to:"/categories",children:t("Categories")})}),j==null?void 0:j.map((a,g)=>e.jsxs("span",{className:"flex items-center font-serif",children:[e.jsxs("li",{className:"text-sm mt-[1px]",children:[" ",e.jsx(z,{})," "]}),e.jsx("li",{className:"text-sm pl-1 transition duration-200 ease-in cursor-pointer text-blue-700 hover:text-green-500 font-semibold ",children:e.jsx(k,{to:`/categories/${a._id}`,children:G(a==null?void 0:a.name,p)})})]},g+1))]})}),e.jsx(l.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(l.CardBody,{children:e.jsxs("div",{className:"flex justify-end items-end",children:[e.jsxs(l.Button,{onClick:S,className:"rounded-md h-12",children:[e.jsx("span",{className:"mr-3",children:e.jsx(J,{})}),t("AddCategory")]}),e.jsx("div",{className:"ml-3 w-full md:w-24 lg:w-24 xl:w-24",children:e.jsxs(l.Button,{disabled:h.length<1,onClick:()=>F(h),className:"w-full rounded-md h-12",children:[e.jsx(K,{}),t("BulkAction")]})}),e.jsxs(l.Button,{disabled:h.length<1,onClick:()=>B(h),className:"ml-3 rounded-md h-12 bg-red-500",children:[e.jsx("span",{className:"mr-3",children:e.jsx(O,{})}),t("Delete")]})]})})}),u?e.jsx(Z,{loading:u}):N?e.jsx("span",{className:"text-center mx-auto text-red-500",children:N}):(T==null?void 0:T.length)!==0?e.jsxs(l.TableContainer,{className:"mb-8",children:[e.jsxs(l.Table,{children:[e.jsx(l.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(l.TableCell,{children:e.jsx(Y,{type:"checkbox",name:"selectAll",id:"selectAll",handleClick:M,isChecked:f})}),e.jsx(l.TableCell,{children:t("catIdTbl")}),e.jsx(l.TableCell,{children:t("catIconTbl")}),e.jsx(l.TableCell,{children:t("Name")}),e.jsx(l.TableCell,{children:t("Description")}),e.jsx(l.TableCell,{className:"text-center",children:t("catPublishedTbl")}),e.jsx(l.TableCell,{className:"text-right",children:t("catActionsTbl")})]})}),e.jsx(W,{categories:E,data:x,lang:p,isCheck:h,setIsCheck:m,useParamId:d})]}),e.jsx(l.TableFooter,{children:e.jsx(l.Pagination,{totalResults:I,resultsPerPage:D,onChange:L,label:"Table navigation"})})]}):e.jsx(ee,{title:"Sorry, There are no categories right now."})]})};export{ue as default};
